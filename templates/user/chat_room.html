{% extends 'user/base.html' %}
{% load static %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-2"></div>
        <div class="col-md-8" style="margin: 2em;background-color: #43434382;border-radius: 8px;
        height: 400px;">
        <div style="background-color: #c3c3c3;height: 50px;margin-left: -15px;margin-right: -15px;border-top-left-radius: 8px;border-top-right-radius: 8px">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTew2PT1GnUtzFQIJq755hjjHAVIZtQz7Ywng&usqp=CAU" style="width: 40px;margin: 5px;border-radius: 50%;" alt="">
            <label for="username" style=" padding-top: 9px;">Username</label>
        </div>
        <div id="messages" style="overflow-y: auto;height: 305px;"></div>
        <div >
            <form onsubmit="printoo()" id="form" action="#" style="display: flex; place-content: center;">
                <input type="text" name="text" id="text" style=" width: 90%;border-radius: 6px;height: 2em;"><button style=" height: 44px; margin-left: 10px;border-radius: 7px;width: 41px; " type="button" onclick="printoo()"><img src=" {% static 'images/paper-clip.svg' %} " style="width: 30px;" alt=""></button>
            </form>
        </div>
        </div>
        <div class="col-md-2"></div>
    </div>
</div>
{{room_name|json_script:"room-name"}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>

<script>
    const roomName = JSON.parse(document.getElementById('room-name').textContent);
    console.log(window.location.host)
    const chatSocket = new WebSocket(
        'ws://' +
        window.location.host +
        '/ws/chat/' + 
        roomName + 
        '/'
    );


    chatSocket.onmessage = function(e){
        const data = JSON.parse(e.data);
        console.log(data.tester)
        document.getElementById('messages').innerHTML = (data.tester)
    }

</script>

<script>
    $('form').submit(false);
    function printoo(){
        console.log('hi')
    }
</script>
{% endblock %}